"use strict";
Page({
    data: {
        caiId: '',
        goodsDetailData: {},
        isCollected: false,
        goods_introduce: '',
        carts: wx.getStorageSync('carts') || []
    },
    onLoad: function (options) {
        this.data.caiId = options.id || '';
        this.getGoodDetail();
    },
    addToCarts: function () {
        var _this = this;
        var carts = this.data.carts;
        var index = carts.findIndex(function (item) {
            return item.goodsDetail.goods_id === _this.data.goodsDetailData.goods_id;
        });
        if (index == -1) {
            var goodsIitem = {
                number: 1,
                goodsDetail: this.data.goodsDetailData
            };
            carts.push(goodsIitem);
        }
        else {
            carts[index].number++;
        }
        wx.setStorageSync('carts', carts);
        this.setData({ carts: wx.getStorageSync('carts') });
        wx.showToast({
            title: '添加成功',
            duration: 1500,
            mask: true,
        });
    },
    redirect: function () {
                wx.navigateTo({
            url: '/pages/cart/index'
        });
    },
    onClickButton: function () {
        console.log('点击按钮');
    },
    changeCollected: function () {
        this.setData({ isCollected: !this.data.isCollected });
    },
    checkDetail: function (e) {
        var imagesURL = [];
        for (var _i = 0, _a = this.data.goodsDetailData.pics; _i < _a.length; _i++) {
            var items = _a[_i];
            imagesURL.push(items.pics_big_url);
        }
        wx.previewImage({
            current: e.currentTarget.dataset.cur.pics_big_url || '',
            urls: imagesURL
        });
    },
    getGoodDetail: function () {
        var _this = this;
        var params = {
            goods_id: this.data.caiId
        };
        getApp().request('/goods/detail', params).then(function (res) {
            _this.setData({ goodsDetailData: res.data.message });
            _this.setData({ goods_introduce: _this.data.goodsDetailData.goods_introduce.replace(/\.webp/g, '.jpg') });
        });
    },
    onReady: function () {
    },
    onShow: function () {
    },
    onHide: function () {
    },
    onUnload: function () {
    },
    onPullDownRefresh: function () {
    },
    onReachBottom: function () {
    },
    onShareAppMessage: function () {
        return {};
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBSUEsSUFBSSxDQUFDO0lBSUgsSUFBSSxFQUFFO1FBQ0osS0FBSyxFQUFFLEVBQUU7UUFDVCxlQUFlLEVBQUUsRUFFaEI7UUFDRCxXQUFXLEVBQUUsS0FBSztRQUNsQixlQUFlLEVBQUUsRUFBRTtRQUNuQixLQUFLLEVBQUUsRUFBRSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFO0tBQ3hDO0lBS0QsTUFBTSxFQUFOLFVBQU8sT0FBTztRQUNaLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLE9BQU8sQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFBO1FBQ2xDLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQTtJQUN0QixDQUFDO0lBQ0QsVUFBVSxFQUFWO1FBQUEsaUJBMEJDO1FBeEJDLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFBO1FBRTNCLElBQUksS0FBSyxHQUFXLEtBQUssQ0FBQyxTQUFTLENBQUMsVUFBQyxJQUFlO1lBRWxELE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLEtBQU0sS0FBSSxDQUFDLElBQUksQ0FBQyxlQUF1QixDQUFDLFFBQVEsQ0FBQTtRQUNsRixDQUFDLENBQUMsQ0FBQTtRQUNGLElBQUksS0FBSyxJQUFJLENBQUMsQ0FBQyxFQUFFO1lBRWYsSUFBSSxVQUFVLEdBQWM7Z0JBQzFCLE1BQU0sRUFBRSxDQUFDO2dCQUNULFdBQVcsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWU7YUFDdkMsQ0FBQTtZQUVELEtBQUssQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUE7U0FDdkI7YUFBTTtZQUNMLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQTtTQUN0QjtRQUNELEVBQUUsQ0FBQyxjQUFjLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxDQUFBO1FBQ2pDLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUE7UUFDbkQsRUFBRSxDQUFDLFNBQVMsQ0FBQztZQUNYLEtBQUssRUFBRSxNQUFNO1lBQ2IsUUFBUSxFQUFFLElBQUk7WUFDZCxJQUFJLEVBQUUsSUFBSTtTQUNYLENBQUMsQ0FBQztJQUNMLENBQUM7SUFDRCxRQUFRO1FBQ04sUUFBUSxDQUFBO1FBQ1IsRUFBRSxDQUFDLFVBQVUsQ0FBQztZQUNaLEdBQUcsRUFBQyxtQkFBbUI7U0FDeEIsQ0FBQyxDQUFBO0lBQ0osQ0FBQztJQUNELGFBQWE7UUFDWCxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3RCLENBQUM7SUFFRCxlQUFlO1FBQ2IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLFdBQVcsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQTtJQUN2RCxDQUFDO0lBRUQsV0FBVyxFQUFYLFVBQVksQ0FBTTtRQUNoQixJQUFJLFNBQVMsR0FBa0IsRUFBRSxDQUFBO1FBQ2pDLEtBQW9CLFVBQXVDLEVBQXZDLEtBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxlQUF1QixDQUFDLElBQUksRUFBdkMsY0FBdUMsRUFBdkMsSUFBdUMsRUFBRTtZQUF4RCxJQUFNLEtBQUssU0FBQTtZQUNkLFNBQVMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFBO1NBQ25DO1FBQ0QsRUFBRSxDQUFDLFlBQVksQ0FBQztZQUNkLE9BQU8sRUFBRSxDQUFDLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsWUFBWSxJQUFJLEVBQUU7WUFDdkQsSUFBSSxFQUFFLFNBQVM7U0FDaEIsQ0FBQyxDQUFBO0lBQ0osQ0FBQztJQUVELGFBQWEsRUFBYjtRQUFBLGlCQVdDO1FBVkMsSUFBSSxNQUFNLEdBQVc7WUFDbkIsUUFBUSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSztTQUMxQixDQUFBO1FBQ0QsTUFBTSxFQUFFLENBQUMsT0FBTyxDQUFDLGVBQWUsRUFBRSxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBQyxHQUFRO1lBR3RELEtBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxlQUFlLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFBO1lBRW5ELEtBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxlQUFlLEVBQUcsS0FBSSxDQUFDLElBQUksQ0FBQyxlQUF1QixDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQTtRQUNsSCxDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUM7SUFJRCxPQUFPLEVBQVA7SUFFQSxDQUFDO0lBS0QsTUFBTSxFQUFOO0lBRUEsQ0FBQztJQUtELE1BQU0sRUFBTjtJQUVBLENBQUM7SUFLRCxRQUFRLEVBQVI7SUFFQSxDQUFDO0lBS0QsaUJBQWlCLEVBQWpCO0lBRUEsQ0FBQztJQUtELGFBQWEsRUFBYjtJQUVBLENBQUM7SUFLRCxpQkFBaUIsRUFBakI7UUFDRSxPQUFPLEVBQUUsQ0FBQTtJQUNYLENBQUM7Q0FDRixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbnRlcmZhY2UgZ29vZHNJdGVtIHtcbiAgbnVtYmVyOiBudW1iZXIsXG4gIGdvb2RzRGV0YWlsOiBhbnlcbn1cblBhZ2Uoe1xuICAvKipcbiAgICog6aG16Z2i55qE5Yid5aeL5pWw5o2uXG4gICAqL1xuICBkYXRhOiB7XG4gICAgY2FpSWQ6ICcnLFxuICAgIGdvb2RzRGV0YWlsRGF0YToge1xuXG4gICAgfSxcbiAgICBpc0NvbGxlY3RlZDogZmFsc2UsXG4gICAgZ29vZHNfaW50cm9kdWNlOiAnJyxcbiAgICBjYXJ0czogd3guZ2V0U3RvcmFnZVN5bmMoJ2NhcnRzJykgfHwgW11cbiAgfSxcblxuICAvKipcbiAgICog55Sf5ZG95ZGo5pyf5Ye95pWwLS3nm5HlkKzpobXpnaLliqDovb1cbiAgICovXG4gIG9uTG9hZChvcHRpb25zKTogdm9pZCB7XG4gICAgdGhpcy5kYXRhLmNhaUlkID0gb3B0aW9ucy5pZCB8fCAnJ1xuICAgIHRoaXMuZ2V0R29vZERldGFpbCgpXG4gIH0sXG4gIGFkZFRvQ2FydHMoKSB7XG5cbiAgICBsZXQgY2FydHMgPSB0aGlzLmRhdGEuY2FydHNcblxuICAgIGxldCBpbmRleDogbnVtYmVyID0gY2FydHMuZmluZEluZGV4KChpdGVtOiBnb29kc0l0ZW0pID0+IHtcblxuICAgICAgcmV0dXJuIGl0ZW0uZ29vZHNEZXRhaWwuZ29vZHNfaWQgPT09ICh0aGlzLmRhdGEuZ29vZHNEZXRhaWxEYXRhIGFzIGFueSkuZ29vZHNfaWRcbiAgICB9KVxuICAgIGlmIChpbmRleCA9PSAtMSkge1xuXG4gICAgICBsZXQgZ29vZHNJaXRlbTogZ29vZHNJdGVtID0ge1xuICAgICAgICBudW1iZXI6IDEsXG4gICAgICAgIGdvb2RzRGV0YWlsOiB0aGlzLmRhdGEuZ29vZHNEZXRhaWxEYXRhXG4gICAgICB9XG5cbiAgICAgIGNhcnRzLnB1c2goZ29vZHNJaXRlbSlcbiAgICB9IGVsc2Uge1xuICAgICAgY2FydHNbaW5kZXhdLm51bWJlcisrXG4gICAgfVxuICAgIHd4LnNldFN0b3JhZ2VTeW5jKCdjYXJ0cycsIGNhcnRzKVxuICAgIHRoaXMuc2V0RGF0YSh7IGNhcnRzOiB3eC5nZXRTdG9yYWdlU3luYygnY2FydHMnKSB9KVxuICAgIHd4LnNob3dUb2FzdCh7XG4gICAgICB0aXRsZTogJ+a3u+WKoOaIkOWKnycsXG4gICAgICBkdXJhdGlvbjogMTUwMCxcbiAgICAgIG1hc2s6IHRydWUsXG4gICAgfSk7XG4gIH0sXG4gIHJlZGlyZWN0KCl7XG4gICAgZGVidWdnZXJcbiAgICB3eC5uYXZpZ2F0ZVRvKHtcbiAgICAgIHVybDonL3BhZ2VzL2NhcnQvaW5kZXgnXG4gICAgfSlcbiAgfSxcbiAgb25DbGlja0J1dHRvbigpIHtcbiAgICBjb25zb2xlLmxvZygn54K55Ye75oyJ6ZKuJyk7XG4gIH0sXG4gIC8v5pS55Y+Y5pS26JeP54q25oCBXG4gIGNoYW5nZUNvbGxlY3RlZCgpIHtcbiAgICB0aGlzLnNldERhdGEoeyBpc0NvbGxlY3RlZDogIXRoaXMuZGF0YS5pc0NvbGxlY3RlZCB9KVxuICB9LFxuICAvL+eCueWHu+WbvueJh+aXtuWFqOWxgOafpeeci1xuICBjaGVja0RldGFpbChlOiBhbnkpOiB2b2lkIHtcbiAgICBsZXQgaW1hZ2VzVVJMOiBBcnJheTxzdHJpbmc+ID0gW11cbiAgICBmb3IgKGNvbnN0IGl0ZW1zIG9mICh0aGlzLmRhdGEuZ29vZHNEZXRhaWxEYXRhIGFzIGFueSkucGljcykge1xuICAgICAgaW1hZ2VzVVJMLnB1c2goaXRlbXMucGljc19iaWdfdXJsKVxuICAgIH1cbiAgICB3eC5wcmV2aWV3SW1hZ2Uoe1xuICAgICAgY3VycmVudDogZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuY3VyLnBpY3NfYmlnX3VybCB8fCAnJywgLy8g5b2T5YmN5pi+56S65Zu+54mH55qEaHR0cOmTvuaOpVxuICAgICAgdXJsczogaW1hZ2VzVVJMIC8vIOmcgOimgemihOiniOeahOWbvueJh2h0dHDpk77mjqXliJfooahcbiAgICB9KVxuICB9LFxuICAvL+iOt+WPluWVhuWTgeivpuaDhVxuICBnZXRHb29kRGV0YWlsKCk6IHZvaWQge1xuICAgIGxldCBwYXJhbXM6IE9iamVjdCA9IHtcbiAgICAgIGdvb2RzX2lkOiB0aGlzLmRhdGEuY2FpSWRcbiAgICB9XG4gICAgZ2V0QXBwKCkucmVxdWVzdCgnL2dvb2RzL2RldGFpbCcsIHBhcmFtcykudGhlbigocmVzOiBhbnkpID0+IHtcblxuXG4gICAgICB0aGlzLnNldERhdGEoeyBnb29kc0RldGFpbERhdGE6IHJlcy5kYXRhLm1lc3NhZ2UgfSlcblxuICAgICAgdGhpcy5zZXREYXRhKHsgZ29vZHNfaW50cm9kdWNlOiAodGhpcy5kYXRhLmdvb2RzRGV0YWlsRGF0YSBhcyBhbnkpLmdvb2RzX2ludHJvZHVjZS5yZXBsYWNlKC9cXC53ZWJwL2csICcuanBnJykgfSlcbiAgICB9KVxuICB9LFxuICAvKipcbiAgICog55Sf5ZG95ZGo5pyf5Ye95pWwLS3nm5HlkKzpobXpnaLliJ3mrKHmuLLmn5PlrozmiJBcbiAgICovXG4gIG9uUmVhZHkoKTogdm9pZCB7XG5cbiAgfSxcblxuICAvKipcbiAgICog55Sf5ZG95ZGo5pyf5Ye95pWwLS3nm5HlkKzpobXpnaLmmL7npLpcbiAgICovXG4gIG9uU2hvdygpOiB2b2lkIHtcblxuICB9LFxuXG4gIC8qKlxuICAgKiDnlJ/lkb3lkajmnJ/lh73mlbAtLeebkeWQrOmhtemdoumakOiXj1xuICAgKi9cbiAgb25IaWRlKCk6IHZvaWQge1xuXG4gIH0sXG5cbiAgLyoqXG4gICAqIOeUn+WRveWRqOacn+WHveaVsC0t55uR5ZCs6aG16Z2i5Y246L29XG4gICAqL1xuICBvblVubG9hZCgpOiB2b2lkIHtcblxuICB9LFxuXG4gIC8qKlxuICAgKiDpobXpnaLnm7jlhbPkuovku7blpITnkIblh73mlbAtLeebkeWQrOeUqOaIt+S4i+aLieWKqOS9nFxuICAgKi9cbiAgb25QdWxsRG93blJlZnJlc2goKTogdm9pZCB7XG5cbiAgfSxcblxuICAvKipcbiAgICog6aG16Z2i5LiK5ouJ6Kem5bqV5LqL5Lu255qE5aSE55CG5Ye95pWwXG4gICAqL1xuICBvblJlYWNoQm90dG9tKCk6IHZvaWQge1xuXG4gIH0sXG5cbiAgLyoqXG4gICAqIOeUqOaIt+eCueWHu+WPs+S4iuinkuWIhuS6q1xuICAgKi9cbiAgb25TaGFyZUFwcE1lc3NhZ2UoKTogT2JqZWN0IHtcbiAgICByZXR1cm4ge31cbiAgfVxufSkiXX0=